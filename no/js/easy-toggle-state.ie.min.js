/*! easy-toggle-state v1.6.0 | (c) 2018 Matthieu Bu√© <https://twikito.com> | MIT License | https://twikito.github.io/easy-toggle-state/ */
!function(){"use strict";var t,e,r,n;Array.from||(Array.from=(t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},r=Math.pow(2,53)-1,n=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),r)},function(t){var r=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,o=arguments.length>1?arguments[1]:void 0;if(void 0!==o){if(!e(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var a,c=n(r.length),u=e(this)?Object(new this(c)):new Array(c),s=0;s<c;)a=r[s],u[s]=o?void 0===i?o(a,s):o.call(i,a,s):a,s+=1;return u.length=c,u})),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){var e,r=(this.document||this.ownerDocument).querySelectorAll(t),n=this;do{for(e=r.length;--e>=0&&r.item(e)!==n;);}while(e<0&&(n=n.parentElement));return n});var i="toggle",o=function(t){return["data",i,t].filter(Boolean).join("-")},a=o("class"),c=o("escape"),u=o("event"),s=o("group"),l=o("is-active"),g=o("outside"),f=o("radio-group"),h=o("target"),v=o("target-all"),A=o("target-next"),d=o("target-only"),b=o("target-parent"),m=o("target-previous"),E=o("target-self"),y=o("state"),p=o("trigger-off"),w=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},T=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)},L=function(t,e){var r=t?"["+t+"]":"";return[].concat(T(e?e.querySelectorAll(r):document.querySelectorAll(("["+a+"]"+r).trim())))},k=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(w(e={},"aria-checked",t.isToggleActive),w(e,"aria-expanded",t.isToggleActive),w(e,"aria-hidden",!t.isToggleActive),w(e,"aria-selected",t.isToggleActive),e);Object.keys(r).forEach(function(e){return t.hasAttribute(e)&&t.setAttribute(e,r[e])})},S=function(t){var e=t.hasAttribute(s)?s:f;return L(e+'="'+t.getAttribute(e)+'"').filter(function(t){return t.isToggleActive})},O=function(t,e){0===e.length&&console.warn("There's no match for the selector '"+t+"' for this trigger");var r=t.match(/#\w+/gi);return r&&r.forEach(function(t){var r=[].concat(T(e)).filter(function(e){return e.id===t.slice(1)});r.length>1&&console.warn("There's "+r.length+" matches for the selector '"+t+"' for this trigger")}),e},j=function(t){if(t.hasAttribute(h)||t.hasAttribute(v)){var e=t.getAttribute(h)||t.getAttribute(v);return O(e,document.querySelectorAll(e))}if(t.hasAttribute(b)){var r=t.getAttribute(b);return O(r,t.parentElement.querySelectorAll(r))}if(t.hasAttribute(E)){var n=t.getAttribute(E);return O(n,t.querySelectorAll(n))}return t.hasAttribute(m)?O("previous",[t.previousElementSibling].filter(Boolean)):t.hasAttribute(A)?O("next",[t.nextElementSibling].filter(Boolean)):[]},x=function t(e){var r=e.target;r.closest("["+y+'="true"]')||(L(g).forEach(function(t){t!==r&&t.isToggleActive&&(t.hasAttribute(s)||t.hasAttribute(f)?N:D)(t)}),r.hasAttribute(g)&&r.isToggleActive&&document.addEventListener(r.getAttribute(u)||"click",t,!1))},q=function(t){D(t.target.targetElement)},M=function(t,e){t.isToggleActive=!t.isToggleActive,k(t),e.hasAttribute(g)&&t.setAttribute(y,e.isToggleActive);var r=L(p,t);r.length>0&&(e.isToggleActive?r.forEach(function(t){t.targetElement=e,t.addEventListener("click",q,!1)}):r.forEach(function(t){t.removeEventListener("click",q,!1)}))},D=function(t){var e=t.getAttribute(a)||"is-active";t.isToggleActive=!t.isToggleActive,k(t),t.hasAttribute(d)||t.classList.toggle(e);for(var r=j(t),n=0;n<r.length;n++)r[n].classList.toggle(e),M(r[n],t);B(t)},B=function(t){t.hasAttribute(g)&&(t.hasAttribute(f)?console.warn("You can't use '"+g+"' on a radio grouped trigger"):t.isToggleActive?document.addEventListener(t.getAttribute(u)||"click",x,!1):document.removeEventListener(t.getAttribute(u)||"click",x,!1))},N=function(t){var e=S(t);e.length>0?(-1===e.indexOf(t)&&(e.forEach(D),D(t)),-1===e.indexOf(t)||t.hasAttribute(f)||D(t)):D(t)},C=function(t){var e,r=t.getAttribute(a)||"is-active";t.isToggleActive=!0,k(t,(w(e={},"aria-checked",!0),w(e,"aria-expanded",!0),w(e,"aria-hidden",!1),w(e,"aria-selected",!0),e)),t.hasAttribute(d)||t.classList.contains(r)||t.classList.add(r);for(var n=j(t),i=0;i<n.length;i++)n[i].classList.contains(r)||n[i].classList.add(r),M(n[i],t);B(t)},F=function(){if(0===L().length)return console.warn("Easy Toggle State is not used: there's no trigger to initialize.");L(l).forEach(function(t){(t.hasAttribute(s)||t.hasAttribute(f))&&S(t).length>0?console.warn("Toggle group '"+(t.getAttribute(s)||t.getAttribute(f))+"' must not have more than one trigger with '"+l+"'"):C(t)}),L().forEach(function(t){t.addEventListener(t.getAttribute(u)||"click",function(e){e.preventDefault(),(t.hasAttribute(s)||t.hasAttribute(f)?N:D)(t)},!1)});var t=L(c);t.length>0&&document.addEventListener("keyup",function(e){"Escape"!==(e=e||window.event).key&&"Esc"!==e.key||t.forEach(function(t){t.isToggleActive&&(t.hasAttribute(f)?console.warn("You can't use '"+c+"' on a radio grouped trigger"):(t.hasAttribute(s)?N:D)(t))})},!1)};document.addEventListener("DOMContentLoaded",function t(){F(),document.removeEventListener("DOMContentLoaded",t)}),window.initEasyToggleState=F}();
